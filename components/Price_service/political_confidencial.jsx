// components/PrivacyPolicyModal.js
"use client";
import { useEffect } from 'react';

export default function PrivacyPolicyModal({ isOpen, onClose }) {
  // Блокировка скролла при открытой модалке
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }

    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isOpen]);

  // Закрытие по ESC
  useEffect(() => {
    const handleEscape = (e) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isOpen, onClose]);

  // Стили
  const styles = {
    overlay: {
      position: 'fixed',
      top: 0,
      left: 0,
      right: 0,
      bottom: 0,
      backgroundColor: 'rgba(0, 0, 0, 0.5)',
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'flex-start',
      padding: '20px',
      zIndex: 1000,
      overflowY: 'auto'
    },
    container: {
      background: 'white',
      borderRadius: '8px',
      boxShadow: '0 10px 30px rgba(0, 0, 0, 0.3)',
      maxWidth: '800px',
      width: '100%',
      margin: '40px auto',
      maxHeight: '90vh',
      display: 'flex',
      flexDirection: 'column'
    },
    header: {
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'center',
      padding: '20px 24px',
      borderBottom: '1px solid #e5e7eb',
      backgroundColor: '#f9fafb'
    },
    title: {
      fontSize: '24px',
      fontWeight: 'bold',
      color: '#1f2937',
      margin: 0
    },
    closeBtn: {
      background: 'none',
      border: 'none',
      fontSize: '28px',
      color: '#6b7280',
      cursor: 'pointer',
      padding: 0,
      width: '32px',
      height: '32px',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center'
    },
    content: {
      padding: '24px',
      overflowY: 'auto',
      flex: 1,
      maxHeight: '60vh'
    },
    footer: {
      display: 'flex',
      justifyContent: 'flex-end',
      padding: '20px 24px',
      borderTop: '1px solid #e5e7eb',
      backgroundColor: '#f9fafb'
    },
    confirmBtn: {
      backgroundColor: '#2563eb',
      color: 'white',
      border: 'none',
      padding: '10px 24px',
      borderRadius: '6px',
      fontSize: '14px',
      fontWeight: '500',
      cursor: 'pointer'
    },
    // Стили для контента политики
    updateDate: {
      fontSize: '14px',
      color: '#6b7280',
      marginBottom: '20px'
    },
    intro: {
      marginBottom: '24px',
      fontSize: '16px',
      lineHeight: '1.6'
    },
    sectionTitle: {
      fontSize: '18px',
      fontWeight: '600',
      color: '#1f2937',
      margin: '24px 0 12px 0'
    },
    paragraph: {
      marginBottom: '16px',
      fontSize: '15px',
      lineHeight: '1.6'
    },
    subparagraph: {
      marginBottom: '12px',
      fontSize: '15px',
      lineHeight: '1.6',
      paddingLeft: '16px'
    },
    list: {
      margin: '12px 0',
      paddingLeft: '32px'
    },
    listItem: {
      marginBottom: '8px',
      fontSize: '15px',
      lineHeight: '1.5'
    }
  };

  if (!isOpen) return null;

  return (
    <div style={styles.overlay} onClick={onClose}>
      <div style={styles.container} onClick={(e) => e.stopPropagation()}>
        {/* Header */}
        <div style={styles.header}>
          <h2 style={styles.title}>Политика конфиденциальности</h2>
          <button
            onClick={onClose}
            style={styles.closeBtn}
            onMouseEnter={(e) => e.target.style.color = '#374151'}
            onMouseLeave={(e) => e.target.style.color = '#6b7280'}
          >
            ×
          </button>
        </div>
        
        {/* Content */}
        <div style={styles.content}>
          <div style={{ color: '#374151', lineHeight: '1.6' }}>
            
            <h3 style={styles.sectionTitle}>ОБЩИЕ ПОЛОЖЕНИЯ ПОЛИТИКИ КОНФИДЕНЦИАЛЬНОСТИ</h3>

            <p style={styles.paragraph}>
              <strong>1.</strong> <strong>Настоящая Политика конфиденциальности</strong> (далее — Политика)
              составлена в соответствии с пунктом 2 статьи 18.1 Федерального
              закона «О персональных данных» № 152-ФЗ от 27 июля 2006 г., а также
              иными нормативно-правовыми актами Российской Федерации в области
              защиты и обработки персональных данных и действует в отношении всех
              персональных данных (далее — Данные), которые Оператор, может
              получить от субъекта персональных данных, являющегося пользователем
              Сайта (далее — Пользователь), находящегося по адресу:
              https://klining-kemerovo.ru/, его сервисах или его поддоменах (далее — Сайт) в процессе
              использования Сайта, а также переходя для дальнейшего взаимодействия
              в мессенджер.
            </p>

            <p style={styles.paragraph}>
              <strong>2.</strong> <strong>Оператор</strong> — лицо, самостоятельно или совместно с другими лицами
              организующее обработку персональных данных, а также определяющее
              цели обработки персональных данных, подлежащих обработке, действия
              (операции), совершаемые с персональными данными. Оператором является
              Индивидуальный предприниматель Смирнов Андрей Леонидович, ИНН
              420510759590, ОГРНИП 322420500078648, e-mail: t-kiva@yandex.ru.
            </p>

            <p style={styles.paragraph}>
              <strong>3.</strong> <strong>Администрация Сайта</strong> -- Оператор и (или) уполномоченные
              Оператором сотрудники для управления Сайтом, которые организуют и
              (или) осуществляют обработку персональных данных, а также определяют
              цели обработки персональных данных, состав персональных данных,
              подлежащих обработке, действия (операции), совершаемые с
              персональными данными.
            </p>

            <p style={styles.paragraph}>
              <strong>4.</strong> Оператор обеспечивает защиту обрабатываемых персональных данных от
              несанкционированного доступа и разглашения, неправомерного
              использования или утраты в соответствии с требованиями Федерального
              закона от 27 июля 2006 г. № 152-ФЗ «О персональных данных».
            </p>

            <p style={styles.paragraph}>
              <strong>5.</strong> Оператор имеет право вносить изменения в настоящую Политику. При
              внесении изменений в заголовке Политики указывается дата последнего
              обновления редакции. Новая редакция Политики вступает в силу с
              момента ее размещения на Сайте, если иное не предусмотрено новой
              редакцией Политики.
            </p>

            <p style={styles.paragraph}>
              <strong>6.</strong> Использование Сайта в любой форме означает безоговорочное согласие
              Пользователя с условиями настоящей Политики конфиденциальности и
              указанными в ней условиями обработки его персональной информации. В
              случае несогласия с условиями Политики конфиденциальности
              Пользователь должен воздержаться от использования Сайта.
            </p>

            <p style={styles.paragraph}>
              <strong>7.</strong> Политика конфиденциальности (в том числе любая из ее частей) может
              быть изменена Администрацией Сайта без какого-либо специального
              уведомления и без выплаты какой-либо компенсации, в связи с этим.
              Новая редакция Политики конфиденциальности вступает в силу с момента
              ее размещения на Сайте Администрации.
            </p>

            <p style={styles.paragraph}>
              <strong>8.</strong> Принимая условия настоящей Политики, Пользователь выражает свое
              согласие на обработку Администрацией Сайта данных о Пользователе в
              целях, предусмотренных настоящей Политикой, а также на передачу
              данных о Пользователе третьим лицам в случаях, перечисленных в
              настоящей Политике, а также в договоре и согласии на обработку
              персональных данных.
            </p>

            <p style={styles.paragraph}>
              <strong>9.</strong> Указанное согласие может быть отозвано Пользователем только при
              условии письменного уведомления им Администрации Сайта не менее чем
              за 30 дней до предполагаемой даты прекращения использования данных
              Администрацией.
            </p>

            <p style={styles.paragraph}>
              <strong>10.</strong> На Сайте размещена программа Яндекс.Метрика для сбора и анализа
              данных о посещаемости Сайта.
            </p>

            <p style={styles.paragraph}>
              <strong>11.</strong> Использование Сайта с помощью веб-браузера, который принимает данные
              из cookies, означает выражение согласия Пользователя с тем, что
              Администрация Сайта может собирать и обрабатывать данные из cookies
              в целях, предусмотренных настоящей Политикой, а также на передачу
              данных из cookies третьим лицам в случаях, перечисленных в настоящей
              Политике.
            </p>

            <p style={styles.paragraph}>
              <strong>12.</strong> Отключение и/или блокировка Пользователем опции веб-браузера по
              приему данных из cookies означает запрет на сбор и обработку
              Администрацией данных из cookies в соответствии с условиями
              настоящей Политики конфиденциальности.
            </p>

            <p style={styles.paragraph}>
              <strong>13.</strong> По общему правилу Администрация Сайта не проверяет достоверность
              предоставляемой Пользователями персональной информации. Вместе с тем
              в случаях, предусмотренных договором, Пользователь обязан
              предоставить подтверждение достоверности предоставленной им
              персональной информации о себе.
            </p>

            <h3 style={styles.sectionTitle}>СОСТАВ ИНФОРМАЦИИ О ПОЛЬЗОВАТЕЛЯХ, КОТОРУЮ ПОЛУЧАЕТ И ОБРАБАТЫВАЕТ АДМИНИСТРАЦИЯ</h3>

            <p style={styles.paragraph}>
              <strong>1.</strong> Настоящая Политика распространяется на следующие виды персональной информации:
            </p>

            <p style={styles.subparagraph}>
              <strong>1.1.</strong> Персональная информация, разрешенная к обработке в рамках
              использования Сайта, предоставляемые Пользователями путем
              заполнения форм на Сайте, а также определяемые в процессе
              использования Сайта, в т.ч. отправки сообщения, иная
              персональная информация, доступ к которой Пользователь
              предоставляет Администрации через веб-Сайт, или персональная
              информация, размещаемая Пользователями в процессе использования
              Сайта.
            </p>

            <p style={styles.subparagraph}>
              <strong>1.2.</strong> К персональной информации, полученной таким образом относится:
              Фамилия, имя, номер телефона, адрес электронной почты,
              информация о действиях Пользователя на сайте, данные о
              местоположении, cookie -- файлы, данные, автоматически
              передаваемые с Сайта в процессе его использования с помощью
              установленного на устройстве Пользователя программного
              обеспечения, в т.ч. IP-адрес, индивидуальный сетевой номер
              устройства (MAC-адрес, ID устройства), электронный серийный
              номер (IMEI, MEID), информация о браузере, операционной системе,
              времени доступа, поисковых запросах Пользователя. Иная
              информация предоставляется Пользователем на его усмотрение на
              основании отдельного согласия на обработку персональных данных.
            </p>

            <p style={styles.subparagraph}>
              <strong>1.3.</strong> Запрещается предоставление Пользователем персональных данных
              третьих лиц без полученного от третьих лиц разрешения на такое
              распространение в виде отдельного документа.
            </p>

            <p style={styles.subparagraph}>
              <strong>1.4.</strong> Лица, предоставляющие данные в форме для сбора данных на Сайте,
              выражают таким образом согласие на обработку следующих
              персональных данных: Фамилия, имя, номер телефона, адрес
              электронной почты.
            </p>

            <p style={styles.subparagraph}>
              <strong>1.5.</strong> Администрация Сайта дополнительно гарантирует Пользователю
              сохранение всей персональной информации о посетителях и
              пользователях Сайта, в том числе:
            </p>

            <ul style={styles.list}>
              <li style={styles.listItem}>Данные, автоматически передаваемые Сайта в процессе его использования с помощью установленного на устройстве Пользователя программного обеспечения, в т.ч. IP-адрес, индивидуальный сетевой номер устройства (MAC-адрес, ID устройства), электронный серийный номер (IMEI, MEID), данные из cookies, информация о браузере, операционной системе, времени доступа, поисковых запросах Пользователя.</li>
            </ul>

            <p style={styles.paragraph}>
              <strong>2.</strong> Данные, дополнительно предоставляемые Пользователями по запросу
              Администрации в целях выполнения обязательств Администрации Сайта
              перед Пользователями в отношении использования Сайта.
            </p>

            <p style={styles.paragraph}>
              <strong>3.</strong> Иная информация о Пользователях, сбор и/или обработка которой
              необходимы для заключения договора.
            </p>

            <h3 style={styles.sectionTitle}>ЦЕЛИ СБОРА И ОБРАБОТКИ КОНФИДЕНЦИАЛЬНОЙ ИНФОРМАЦИИ О ПОЛЬЗОВАТЕЛЯХ САЙТА</h3>

            <p style={styles.paragraph}>
              <strong>1.</strong> Администрация Сайта осуществляет сбор и обработку только той
              информации о Пользователях, в т.ч. персональных данных, которая
              необходима для выполнения обязательств Администрации по
              предоставлению информации об услугах, представленных на Сайте, для
              ответов на вопросы, заданные Пользователем при отправке сообщения с
              помощью Сайта, а также исполнения иных обязательств, предусмотренных
              отдельным договором.
            </p>

            <p style={styles.paragraph}>
              <strong>2.</strong> Администрация использует полученную персональную информацию
              Пользователей для целей:
            </p>

            <p style={styles.subparagraph}>
              <strong>2.1.</strong> идентификации стороны в рамках предоставляемой информации
              Пользователем с целью заключения договоров;
            </p>

            <p style={styles.subparagraph}>
              <strong>2.2.</strong> установления с Пользователем обратной связи, включая
              консультирование, реализацию услуг;
            </p>

            <p style={styles.subparagraph}>
              <strong>2.3.</strong> предоставления Пользователям услуг и/или для выполнения
              обязательств Оператором перед Пользователями в т.ч. уточнения
              тех или иных данных, дальнейшего совершенствования Сайта,
              разработки новых услуг.
            </p>

            <p style={styles.paragraph}>
              <strong>3.</strong> При необходимости использовать персональную информацию о
              Пользователе в целях, не предусмотренных настоящей Политикой,
              Администрация запрашивает согласие Пользователя на такие действия.
            </p>

            <p style={styles.paragraph}>
              <strong>4.</strong> Срок обработки персональных данных определяется моментом достижения
              целей, указанных в п. 2 настоящей Политики.
            </p>

            <p style={styles.paragraph}>
              В случае достижения цели обработки персональных данных оператор обязан
              прекратить обработку персональных данных и уничтожить персональные
              данные в срок, не превышающий 30 дней с даты достижения цели обработки
              персональных данных, если иное не предусмотрено договором, стороной
              которого, выгодоприобретателем или поручителем по которому является
              субъект персональных данных, иным соглашением между оператором и
              субъектом персональных данных либо если оператор не вправе осуществлять
              обработку персональных данных без согласия субъекта персональных данных
              на основаниях, предусмотренных настоящим Федеральным законом или другими
              федеральными законами.
            </p>

            <h3 style={styles.sectionTitle}>ОБРАБОТКА КОНФИДЕНЦИАЛЬНОЙ ИНФОРМАЦИИ О ПОЛЬЗОВАТЕЛЯХ</h3>

            <p style={styles.paragraph}>
              <strong>1.</strong> Конфиденциальная информация о Пользователях хранится в соответствии
              с действующим законодательством.
            </p>

            <p style={styles.paragraph}>
              <strong>2.</strong> Конфиденциальная информация о Пользователях не передается третьим
              лицам, за исключением случаев, когда передача необходима в целях
              обеспечения функционирования Сайта и/или его отдельных
              функциональных возможностей.
            </p>

            <p style={styles.subparagraph}>
              <strong>2.1.</strong> Передача предусмотрена действующим законодательством в целях
              обеспечения возможности защиты прав и законных интересов
              Администрации и/или третьих лиц в случаях, когда Пользователь
              нарушает условия договора.
            </p>

            <p style={styles.paragraph}>
              <strong>3.</strong> Пользователь настоящим уведомлен и соглашается, что Администрация
              может получать Конфиденциальную информацию третьих лиц, которые
              предоставляются Пользователем при использовании Сайта и использовать
              их для реализации отдельных функций Сайта, при условии, что
              Пользователь гарантирует наличие согласия третьих лиц, данные о
              которых предоставляются Пользователем при использовании Сайта, на
              обработку Администрацией, в целях, предусмотренных настоящей
              Политикой, а также на передачу таких данных в случаях, перечисленных
              в настоящей Политике.
            </p>

            <p style={styles.paragraph}>
              <strong>4.</strong> Кроме того, Пользователь настоящим уведомлен и соглашается, что
              Администрация может получать статистические обезличенные (без
              привязки к Пользователю) данные о действиях Пользователя при
              использовании Сайта.
            </p>

            <p style={styles.paragraph}>
              <strong>5.</strong> Пользователи вправе по запросу получать от Администрации информацию,
              касающуюся обработки их персональных данных.
            </p>

            <h3 style={styles.sectionTitle}>МЕРЫ ПО ЗАЩИТЕ КОНФИДЕНЦИАЛЬНОЙ ИНФОРМАЦИИ О ПОЛЬЗОВАТЕЛЯХ</h3>

            <p style={styles.paragraph}>
              <strong>1.</strong> Администрация принимает все необходимые и достаточные
              организационные и технические меры для защиты Конфиденциальная
              информации о Пользователях от неправомерного или случайного доступа
              к ним, уничтожения, изменения, блокирования, распространения
              персональной информации, а также от иных неправомерных действий с
              ней. К этим мерам относятся, в частности, внутренняя проверка
              процессов сбора, хранения и обработки данных и мер безопасности,
              включая меры по обеспечению физической безопасности данных для
              предотвращения неавторизированного доступа к персональной
              информации.
            </p>

            <p style={styles.paragraph}>
              <strong>2.</strong> При обработке персональных данных Пользователей Администрация
              руководствуется Федеральным законом «О персональных данных» от
              27.07.2006 г. № 152-ФЗ (с изменениями от 14.07.2022 № 266-ФЗ)
            </p>

            <h3 style={styles.sectionTitle}>ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ</h3>

            <p style={styles.paragraph}>
              <strong>1.</strong> Настоящая Политика регулирует отношения между Пользователем и
              Оператором, возникающие в связи с применением настоящей Политики.
            </p>

            <p style={styles.paragraph}>
              <strong>2.</strong> Вопросы, не урегулированные настоящей Политикой, регулируются
              действующим законодательством Российской Федерации.
            </p>

          </div>
        </div>

        {/* Footer */}
        <div style={styles.footer}>
          <button
            onClick={onClose}
            style={styles.confirmBtn}
            onMouseEnter={(e) => e.target.style.backgroundColor = '#1d4ed8'}
            onMouseLeave={(e) => e.target.style.backgroundColor = '#2563eb'}
          >
            Закрыть
          </button>
        </div>
      </div>
    </div>
  );
}